---
# tasks file for ansible-role-kube-devops-tools
# NFS Client Provisioner
- name: Copy the nfs-client-provisioner_values.yml template
  template: 
    src: nfs-client-provisioner_values.yml.j2
    dest: ~/nfs-client-provisioner_values.yml
    mode: '0644'
- name: Install nfs-client-provisioner
  command: /usr/local/bin/helm install --values ~/nfs-client-provisioner_values.yml --name nfs-client-provisioner stable/nfs-client-provisioner
  register: result
- name: Display nfs-client-provisioner output
  debug:
    var: result.stdout_lines
#- name: Copy the prometheus_values.yml.j2 template
#  template: 
#    src: prometheus_values.yml.j2 
#    dest: ~/prometheus_values.yml
#    mode: '0644'
#- name: Install Prometheus
#  command: /usr/local/bin/helm install --values ~/prometheus_values.yml --name prometheus stable/prometheus
#  register: result
#- name: Display Prometheus output
#  debug:
#    var: result.stdout_lines
# Ingress Nginx Proxy
- name: Copy the nginx-ingress-values.yml.j2 template
  template:
    src: nginx-ingress-values.yml.j2 
    dest: ~/nginx-ingress-values.yml
    mode: '0644'
- name: Install nginx-ingress
  command: /usr/local/bin/helm install --values ~/nginx-ingress-values.yml --name nginx-ingress stable/nginx-ingress
  register: result
- name: Display nginx-ingress output
  debug:
    var: result.stdout_lines
#- name: Install Jenkins Master
#  become_user: "{{ linux_user }}"
#  command: /usr/local/bin/helm install --set persistence.existingClaim=jenkins-vol-claim --set master.adminPassword={{ Jenkins_Admin_Password }} --name my-jenkins stable/jenkins 
#- name: Install Kibana
#  become_user: "{{ linux_user }}"
#  command: /usr/local/bin/helm install --name my-kybana stable/kibana
